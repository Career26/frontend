import{c as St,e as H,g as rt}from"/build/_shared/chunk-R7DKMHBB.js";var nt=St((Dt,ot)=>{"use strict";ot.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var o,n,s;if(Array.isArray(t)){if(o=t.length,o!=r.length)return!1;for(n=o;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),o=s.length,o!==Object.keys(r).length)return!1;for(n=o;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=o;n--!==0;){var c=s[n];if(!e(t[c],r[c]))return!1}return!0}return t!==t&&r!==r}});var a=H(rt(),1),C=H(nt(),1);var T=H(rt(),1);function xt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}var At=typeof window<"u"?T.useLayoutEffect:T.useEffect;function h(e,t){At(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function it(e,t){e&&xt(e),h(`mantine-form:${e}:set-field-value`,r=>t.setFieldValue(r.detail.path,r.detail.value)),h(`mantine-form:${e}:set-values`,r=>t.setValues(r.detail)),h(`mantine-form:${e}:set-initial-values`,r=>t.setInitialValues(r.detail)),h(`mantine-form:${e}:set-errors`,r=>t.setErrors(r.detail)),h(`mantine-form:${e}:set-field-error`,r=>t.setFieldError(r.detail.path,r.detail.error)),h(`mantine-form:${e}:clear-field-error`,r=>t.clearFieldError(r.detail)),h(`mantine-form:${e}:clear-errors`,t.clearErrors),h(`mantine-form:${e}:reset`,t.reset),h(`mantine-form:${e}:validate`,t.validate),h(`mantine-form:${e}:validate-field`,r=>t.validateField(r.detail)),h(`mantine-form:${e}:reorder-list-item`,r=>t.reorderListItem(r.detail.path,r.detail.payload)),h(`mantine-form:${e}:remove-list-item`,r=>t.removeListItem(r.detail.path,r.detail.index)),h(`mantine-form:${e}:insert-list-item`,r=>t.insertListItem(r.detail.path,r.detail.item,r.detail.index)),h(`mantine-form:${e}:set-dirty`,r=>t.setDirty(r.detail)),h(`mantine-form:${e}:set-touched`,r=>t.setTouched(r.detail)),h(`mantine-form:${e}:reset-dirty`,r=>t.resetDirty(r.detail)),h(`mantine-form:${e}:reset-touched`,t.resetTouched)}function S(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,r)=>{let o=e[r];return o!=null&&o!==!1&&(t[r]=o),t},{})}function st(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){let{currentTarget:r}=t;r instanceof HTMLInputElement?r.type==="checkbox"?e(r.checked):e(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&e(r.value)}else e(t)}}function q(e,t){let r=Object.keys(e);if(typeof t=="string"){let o=r.filter(n=>n.startsWith(`${t}.`));return e[t]||o.some(n=>e[n])||!1}return r.some(o=>e[o])}function N(e,t){if(t===null||typeof t!="object")return{};let r={...t};return Object.keys(t).forEach(o=>{o.includes(`${String(e)}.`)&&delete r[o]}),r}function ct(e,t){let r=e.substring(t.length+1).split(".")[0];return parseInt(r,10)}function z(e,t,r,o){if(t===void 0)return r;let n=`${String(e)}`,s=r;o===-1&&(s=N(`${n}.${t}`,s));let c={...s},d=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${n}.`))return!1;let y=ct(u,n);return Number.isNaN(y)?!1:y>=t}).forEach(([u,y])=>{let E=ct(u,n),$=u.replace(`${n}.${E}`,`${n}.${E+o}`);c[$]=y,d.add($),d.has(u)||delete c[u]}),c}function ft(e,{from:t,to:r},o){let n=`${e}.${t}`,s=`${e}.${r}`,c={...o};return Object.keys(o).every(d=>{let u,y;if(d.startsWith(n)&&(u=d,y=d.replace(n,s)),d.startsWith(s)&&(u=d.replace(s,n),y=d),u&&y){let E=c[u],$=c[y];return $===void 0?delete c[u]:c[u]=$,E===void 0?delete c[y]:c[y]=E,!1}return!0}),c}function M(e){return typeof e!="string"?[]:e.split(".")}function g(e,t){let r=M(e);if(r.length===0||typeof t!="object"||t===null)return;let o=t[r[0]];for(let n=1;n<r.length&&o!==void 0;n+=1)o=o[r[n]];return o}function lt(e,t,r){typeof r.value=="object"&&(r.value=F(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||t==="__proto__"?Object.defineProperty(e,t,r):e[t]=r.value}function F(e){if(typeof e!="object")return e;var t=0,r,o,n,s=Object.prototype.toString.call(e);if(s==="[object Object]"?n=Object.create(e.__proto__||null):s==="[object Array]"?n=Array(e.length):s==="[object Set]"?(n=new Set,e.forEach(function(c){n.add(F(c))})):s==="[object Map]"?(n=new Map,e.forEach(function(c,d){n.set(F(d),F(c))})):s==="[object Date]"?n=new Date(+e):s==="[object RegExp]"?n=new RegExp(e.source,e.flags):s==="[object DataView]"?n=new e.constructor(F(e.buffer)):s==="[object ArrayBuffer]"?n=e.slice(0):s.slice(-6)==="Array]"&&(n=new e.constructor(e)),n){for(o=Object.getOwnPropertySymbols(e);t<o.length;t++)lt(n,o[t],Object.getOwnPropertyDescriptor(e,o[t]));for(t=0,o=Object.getOwnPropertyNames(e);t<o.length;t++)Object.hasOwnProperty.call(n,r=o[t])&&n[r]===e[r]||lt(n,r,Object.getOwnPropertyDescriptor(e,r))}return n||e}function O(e,t,r){let o=M(e);if(o.length===0)return r;let n=F(r);if(o.length===1)return n[o[0]]=t,n;let s=n[o[0]];for(let c=1;c<o.length-1;c+=1){if(s===void 0)return n;s=s[o[c]]}return s[o[o.length-1]]=t,n}function ut(e,{from:t,to:r},o){let n=g(e,o);if(!Array.isArray(n))return o;let s=[...n],c=n[t];return s.splice(t,1),s.splice(r,0,c),O(e,s,o)}function at(e,t,r,o){let n=g(e,o);if(!Array.isArray(n))return o;let s=[...n];return s.splice(typeof r=="number"?r:s.length,0,t),O(e,s,o)}function mt(e,t,r){let o=g(e,r);return Array.isArray(o)?O(e,o.filter((n,s)=>s!==t),r):r}function dt(e){let t=S(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function B(e,t,r="",o={}){return typeof e!="object"||e===null?o:Object.keys(e).reduce((n,s)=>{let c=e[s],d=`${r===""?"":`${r}.`}${s}`,u=g(d,t),y=!1;return typeof c=="function"&&(n[d]=c(u,t,d)),typeof c=="object"&&Array.isArray(u)&&(y=!0,u.forEach((E,$)=>B(c,t,`${d}.${$}`,n))),typeof c=="object"&&typeof u=="object"&&u!==null&&(y||B(c,t,d,n)),n},o)}function x(e,t){return dt(typeof e=="function"?e(t):B(e,t))}function A(e,t,r){if(typeof e!="string")return{hasError:!1,error:null};let o=x(t,r),n=Object.keys(o.errors).find(s=>e.split(".").every((c,d)=>c===s.split(".")[d]));return{hasError:!!n,error:n?o.errors[n]:null}}var K="__MANTINE_FORM_INDEX__";function Z(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${K}`)):!1:!1}function Lt({name:e,initialValues:t={},initialErrors:r={},initialDirty:o={},initialTouched:n={},clearInputErrorOnChange:s=!0,validateInputOnChange:c=!1,validateInputOnBlur:d=!1,onValuesChange:u,transformValues:y=$=>$,validate:E}={}){let[$,L]=(0,a.useState)(n),[W,V]=(0,a.useState)(o),[p,v]=(0,a.useState)(t),[G,P]=(0,a.useState)(S(r)),D=(0,a.useRef)(t),J=i=>{D.current=i},Q=(0,a.useCallback)(()=>L({}),[]),yt=i=>{let f=i?{...p,...i}:p;J(f),V({})},X=(0,a.useCallback)(i=>P(f=>S(typeof i=="function"?i(f):i)),[]),k=(0,a.useCallback)(()=>P({}),[]),U=(0,a.useCallback)(()=>{v(D.current),k(),V({}),Q()},[]),I=(0,a.useCallback)((i,f)=>X(l=>({...l,[i]:f})),[]),_=(0,a.useCallback)(i=>X(f=>{if(typeof i!="string")return f;let l={...f};return delete l[i],l}),[]),R=(0,a.useCallback)(i=>V(f=>{if(typeof i!="string")return f;let l=N(i,f);return delete l[i],l}),[]),Y=(0,a.useCallback)((i,f)=>{let l=Z(i,c);R(i),L(m=>({...m,[i]:!0})),v(m=>{let b=O(i,f,m);if(l){let j=A(i,E,b);j.hasError?I(i,j.error):_(i)}return u?.(b),b}),!l&&s&&I(i,null)},[]),ht=(0,a.useCallback)(i=>{v(f=>{let l=typeof i=="function"?i(f):i,m={...f,...l};return u?.(m),m}),s&&k()},[]),Et=(0,a.useCallback)((i,f)=>{R(i),v(l=>{let m=ut(i,f,l);return u?.(m),m}),P(l=>ft(i,f,l))},[]),gt=(0,a.useCallback)((i,f)=>{R(i),v(l=>{let m=mt(i,f,l);return u?.(m),m}),P(l=>z(i,f,l,-1))},[]),$t=(0,a.useCallback)((i,f,l)=>{R(i),v(m=>{let b=at(i,f,l,m);return u?.(b),b}),P(m=>z(i,l,m,1))},[]),tt=(0,a.useCallback)(()=>{let i=x(E,p);return P(i.errors),i},[p,E]),bt=(0,a.useCallback)(i=>{let f=A(i,E,p);return f.hasError?I(i,f.error):_(i),f},[p,E]),jt=(i,{type:f="input",withError:l=!0,withFocus:m=!0}={})=>{let j={onChange:st(w=>Y(i,w))};return l&&(j.error=G[i]),f==="checkbox"?j.checked=g(i,p):j.value=g(i,p),m&&(j.onFocus=()=>L(w=>({...w,[i]:!0})),j.onBlur=()=>{if(Z(i,d)){let w=A(i,E,p);w.hasError?I(i,w.error):_(i)}}),j},Ot=(i,f)=>l=>{l?.preventDefault();let m=tt();m.hasErrors?f?.(m.errors,p,l):i?.(y(p),l)},Ft=i=>y(i||p),vt=(0,a.useCallback)(i=>{i.preventDefault(),U()},[]),Pt=i=>{if(i){let l=g(i,W);if(typeof l=="boolean")return l;let m=g(i,p),b=g(i,D.current);return!(0,C.default)(m,b)}return Object.keys(W).length>0?q(W):!(0,C.default)(p,D.current)},wt=(0,a.useCallback)(i=>q($,i),[$]),It=(0,a.useCallback)(i=>i?!A(i,E,p).hasError:!x(E,p).hasErrors,[p,E]),et={values:p,errors:G,setValues:ht,setInitialValues:J,setErrors:X,setFieldValue:Y,setFieldError:I,clearFieldError:_,clearErrors:k,reset:U,validate:tt,validateField:bt,reorderListItem:Et,removeListItem:gt,insertListItem:$t,getInputProps:jt,onSubmit:Ot,onReset:vt,isDirty:Pt,isTouched:wt,setTouched:L,setDirty:V,resetTouched:Q,resetDirty:yt,isValid:It,getTransformedValues:Ft};return it(e,et),et}function pt(e,t){if(typeof e=="number")return t.length===e;let{max:r,min:o}=e,n=!0;return typeof r=="number"&&t.length>r&&(n=!1),typeof o=="number"&&t.length<o&&(n=!1),n}function Vt(e,t){let r=t||!0;return o=>typeof o=="string"?pt(e,o.trim())?null:r:typeof o=="object"&&o!==null&&"length"in o&&pt(e,o)?null:r}export{K as a,Lt as b,Vt as c};
