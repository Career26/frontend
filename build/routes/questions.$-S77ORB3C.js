import{b as _,c as K}from"/build/_shared/chunk-LK2IODK6.js";import{a as G,b as le}from"/build/_shared/chunk-QTXYYKK6.js";import"/build/_shared/chunk-WFOEOJ23.js";import{A as ce,r as ae,t as be,w as S,x as g}from"/build/_shared/chunk-EKS5ZLJE.js";import{$b as ie,Lb as ne,Pb as re,Qb as b,Ub as B,Va as O,Xb as se,Ya as Y,Z as v,_ as D,aa as A,ac as m,bc as q,da as u,ea as F,kb as H,la as P,na as C,nb as J,oa as L,ob as U,pa as V,sa as W,ta as $,tb as X,ub as Z,wa as z,wb as j,xb as ee,yb as te,zb as oe}from"/build/_shared/chunk-2W7QTXDV.js";import{e as r,g as R,i as E,o as M,s as l}from"/build/_shared/chunk-R7DKMHBB.js";var Se=r(R(),1);var w=r(R(),1);var e=r(l(),1),Be=({suggestedFormat:s})=>(0,e.jsx)($,{spacing:"md",center:!0,children:Object.entries(s).map(([a,n])=>(0,e.jsx)($.Item,{icon:(0,e.jsx)(P,{children:a}),children:n},`suggestion-${a}`))}),ue=()=>{let[s,a]=(0,w.useState)(null),n=m(B),o=m(b),d=`suggestion-${n}-${o?.question}`,[c,{isLoading:x}]=te({fixedCacheKey:d}),f=m(N=>oe(N,d));return(0,w.useEffect)(()=>{!o||!s||!n||f||c({question:o.question,careerPathId:n})},[s,o,n]),(0,w.useEffect)(()=>{a(null)},[o,n]),(0,e.jsx)(v,{withBorder:!0,children:(0,e.jsx)(u,{value:s,onChange:a,children:(0,e.jsxs)(u.Item,{value:"suggestion",children:[(0,e.jsx)(u.Control,{children:"Show Suggestion"}),(0,e.jsx)(u.Panel,{children:x?(0,e.jsx)(D,{type:"dots"}):f&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(g,{title:"Suggested Format",content:(0,e.jsx)(Be,{suggestedFormat:f?.suggestedFormat}),Icon:(0,e.jsx)(U,{fill:"yellow"})}),(0,e.jsx)(g,{title:"Sample Answer",content:f?.sampleAnswer,Icon:(0,e.jsx)(O,{fill:"yellow"})}),(0,e.jsx)(g,{title:"Reasoning",content:f?.whySuitable,Icon:(0,e.jsx)(H,{})})]})})]})})})};var me=r(be(),1);var ge=r(l(),1),de=({selectedQuestionId:s,questions:a})=>{let{toggleQuestionId:n}=q(),{isMobile:o}=ae();return a?.map(({question:d},c)=>(0,ge.jsx)(z,{className:(0,me.default)({[S.mobileNavbar]:o}),active:s===c,onClick:()=>n(c),label:`${c+1}. ${d}`},`question-${c}`))};var pe=r(R(),1);var t=r(l(),1),fe=({onClickReset:s,onClickNext:a,nextDisabled:n,rating:o})=>{let[d,c]=(0,pe.useState)("rating");return o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{withBorder:!0,children:(0,t.jsx)(u,{value:d,onChange:c,children:(0,t.jsxs)(u.Item,{value:"rating",children:[(0,t.jsx)(u.Control,{children:"Answer Rating"}),(0,t.jsx)(u.Panel,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{Icon:(0,t.jsx)(J,{color:"orange"}),title:"General Feedback",content:o.generalFeedback}),(0,t.jsx)(g,{Icon:(0,t.jsx)(Y,{color:"green"}),title:"Improvements",content:o.suggestedImprovements}),(0,t.jsx)(g,{Icon:(0,t.jsx)(X,{}),title:"Example Answer",content:o.exampleAnswer})]})})]})})}),(0,t.jsxs)("div",{className:S.row,children:[(0,t.jsx)(C,{variant:"light",onClick:s,children:"Retry"}),(0,t.jsx)(C,{variant:"outline",disabled:n,onClick:a,children:"Next"})]})]}):null};var k={container:"BjEoI",questionCard:"znkY4"};var p=r(l(),1),Ie=({title:s,category:a,question:n,color:o})=>(0,p.jsxs)(L,{padding:"lg",radius:"md",withBorder:!0,className:k.questionCard,children:[(0,p.jsx)(L.Section,{withBorder:!0,inheritPadding:!0,py:"xs",className:S.lightNavyBg,children:(0,p.jsxs)(A,{justify:"space-between",children:[(0,p.jsx)(F,{fw:"bold",children:s}),(0,p.jsx)(P,{color:o,children:a})]})}),(0,p.jsx)(F,{py:"lg",children:n})]});var i=r(l(),1);var qe=()=>{let s=E(),{careerId:a,questionId:n}=M(),o=ie(),{loading:d,unauthenticated:c}=le(),{toggleQuestionId:x,toggleCareerId:f}=q(),N=m(B),h=m(b),Q=m(re),{data:I,isFetching:he}=j(),[ye,{data:Ce,isLoading:T,reset:we}]=ee(),Qe=m(se),ve=()=>{y.reset(),we()},y=_({initialValues:{answer:""},validate:{answer:K({min:1,max:1e3},"Answer must be 10-1000 characters long")}});return(0,Se.useEffect)(()=>{if(!I)return;let Ae=I.map(({category:Pe})=>Pe);o(ne(Ae))},[I]),d||he?(0,i.jsx)(G,{}):c?(s(Z.landingPage),(0,i.jsx)(G,{})):h?(0,i.jsx)(ce,{navbar:(0,i.jsx)(de,{selectedQuestionId:Q,questions:I}),children:(0,i.jsxs)(V,{py:"md",className:k.container,children:[(0,i.jsx)(Ie,{title:`Question ${Q+1}`,question:h.question,category:h.category,color:Qe[h.category]}),(0,i.jsx)(ue,{}),(0,i.jsx)(W,{...y.getInputProps("answer"),label:`Answer (${1e3-y.values.answer.length} characters remaining)`,placeholder:"Enter your response here",withAsterisk:!0,minRows:5,maxRows:10,autosize:!0}),(0,i.jsx)(A,{justify:"flex-end",children:(0,i.jsx)(C,{variant:"outline",disabled:!y.isValid()||T,loading:T,w:"20%",onClick:()=>ye({question:h.question,answer:y.values.answer,careerPathId:N}),children:"Submit"})}),(0,i.jsx)(fe,{rating:Ce,onClickNext:()=>x(Q+1),onClickReset:ve,nextDisabled:I&&Q===I.length-1})]})}):null},ke=qe;export{ke as default};
